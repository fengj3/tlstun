This is a direct clone of https://github.com/golang/net/websocket directory @ b026840ad5cb594d38a2b783be1b6644fe5325fb
Only change is that server websockets are not defered closed.
